<!doctype html>
<!--doctype informa ao agente de usuario a versão do html que deve ser renderizada-->
<html>
    <head>
        <title>pagina de exemplo de estrutura</title>
        <meta charset="utf-8">
        <meta name="author" content="mateus klein">
        <meta name="description" content="lista de documentos">
        <meta name="keywords" content="html5, tecnologia">
        <script src="01-calcula_media.js"></script>

        <style>

        </style>
    </head>
    <body>
        <h1>CURSO JAVASCRIPT EXEMPLOS</h1>

        <section>
            <div class="container">
                <h2>Média dos alunos</h2>
                <table class="tabela js-tabela">
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Nota 1</th>
                            <th>Nota 2</th>
                            <th>Nota 3</th>
                            <th>Nota 4</th>
                            <th>Media</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="aluno">
                            <td class="alunonome">Gertrude</td>
                            <td class="alunon1">10</td>
                            <td class="alunon2">4</td>
                            <td class="alunon3">5</td>
                            <td class="alunon4">7</td>
                            <td class="alunom"></td>
                        </tr>
                        <tr class="aluno">
                            <td class="alunonome">Mario</td>
                            <td class="alunon1">7</td>
                            <td class="alunon2">4</td>
                            <td class="alunon3">8</td>
                            <td class="alunon4">9</td>
                            <td class="alunom"></td>
                        </tr>
                        <tr class="aluno">
                            <td class="alunonome">Ana</td>
                            <td class="alunon1">7</td>
                            <td class="alunon2">9</td>
                            <td class="alunon3">2</td>
                            <td class="alunon4">3</td>
                            <td class="alunom"></td>
                        </tr>
                        <tr class="aluno">
                            <td class="alunonome">Joao</td>
                            <td class="alunon1">6</td>
                            <td class="alunon2">7</td>
                            <td class="alunon3">7</td>
                            <td class="alunon4">6</td>
                            <td class="alunom"></td>
                        </tr>
                        <tr class="aluno">
                            <td class="alunonome">Marcos</td>
                            <td class="alunon1">2</td>
                            <td class="alunon2">10</td>
                            <td class="alunon3">5</td>
                            <td class="alunon4">8</td>
                            <td class="alunom"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <script>
            function pegaNota(td){
                return parseFloat(td.textContent);
            }

            function recuperarNumerosDeColunas(tds){
                var x=0;
                var arr = [];
                while(tds[x]){
                    if(!isNaN(tds[x].textContent) && tds[x].textContent != ""){
                        arr.push(parseFloat(tds[x].textContent));
                    }
                    x++;
                }
                return arr;
            }

            var trs = document.querySelectorAll(".js-tabela tbody .aluno");
            var x=0;
            while(trs[x]){
                var linhaAluno = trs[x];
                var media;
                var tds = linhaAluno.querySelectorAll("td")
                var notas = recuperarNumerosDeColunas(tds);
                
                media = calcula_media.apply(this, notas);

                linhaAluno.querySelector(".alunom").textContent = media;

                x++;
            }
        </script>
    </body>
</html>